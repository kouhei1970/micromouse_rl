# マイクロマウス迷路仕様書 (Simulation)

本ドキュメントは、強化学習シミュレーション環境におけるマイクロマウス迷路の仕様を定義するものである。

## 1. 座標系定義

### 1.1 迷路座標 (Maze Coordinates)
*   **単位**: 区画 (Cell)
*   **表記**: $(x, y)$
*   **範囲**: $(0, 0)$ 〜 $(15, 15)$ （整数）
*   **定義**:
    *   $(0, 0)$: スタート区画（迷路の南西角）
    *   $+x$: 東方向
    *   $+y$: 北方向

### 1.2 メトリック座標 (Metric Coordinates)
*   **単位**: メートル (m)
*   **表記**: $(x_m, y_m)$
*   **原点 $(0, 0)$ の定義**:
    *   迷路全体の**南西の角にある柱の中心**を原点とする。
    *   物理的な迷路の左下の角。

### 1.3 座標変換式
区画 $(x, y)$ の**中心座標** $(cx, cy)$ は以下の式で求められる。

$$
cx = x \times 0.18 + 0.09 \\
cy = y \times 0.18 + 0.09
$$

*   例: スタート区画 $(0, 0)$ の中心 = $(0.09, 0.09)$

## 2. 迷路構成要素

### 2.1 基本寸法
*   **区画サイズ**: $180mm \times 180mm$ ($0.18m \times 0.18m$)
*   **壁・柱の厚さ**: $12mm$ ($0.012m$)
*   **壁・柱の高さ**: $50mm$ ($0.05m$)

### 2.2 柱 (Posts)
*   **配置**: グリッドの交点 $(i \times 0.18, j \times 0.18)$
*   **形状**: $12mm \times 12mm \times 50mm$ の直方体
*   **外観**: **全体が白**
    *   ※シミュレーション上の視認性向上のため、本来の赤ではなく白とする。

### 2.3 壁 (Walls)
*   **配置**: 柱と柱の間
*   **形状**:
    *   長さ: $168mm$ ($180mm - 12mm$)
    *   厚さ: $12mm$
    *   高さ: $50mm$
*   **外観**:
    *   **側面**: **白**
    *   **上面**: **赤**
    *   ※実装上は、白い壁本体の上に薄い赤色のプレートを配置して表現する。

### 2.4 床 (Floor)
*   **外観**: ダークグレー系の市松模様
*   **模様サイズ**: $90mm \times 90mm$ （1区画あたり $2 \times 2$ の模様）

## 3. マウスの初期配置 (Slalom Task)

*   **スタート区画**: 迷路座標 $(0, 0)$
*   **初期位置 (Metric)**: $(0.09, 0.09, z)$
    *   $z$ はタイヤが接地する高さ（約 $0.002m$）
*   **初期向き**: **北向き (+Y軸方向)**
    *   Euler角: $(0, 0, 90)$

## 4. スラローム課題 (Phase 2) の構成

16x16迷路の一部（3x3区画）を使用し、以下のL字クランク経路を走行する。

*   **経路**:
    1.  Start $(0, 0)$ [Metric: $0.09, 0.09$]
    2.  直進 $\to (0, 1)$
    3.  直進 $\to (0, 2)$ [Metric: $0.09, 0.45$]
    4.  右折 (Slalom Turn)
    5.  直進 $\to (1, 2)$
    6.  Goal $(2, 2)$ [Metric: $0.45, 0.45$]

*   **ゴール判定**: マウスの中心が区画 $(2, 2)$ の領域内に入ること。
